(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96e9414a"],{"365f":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return s})),r.d(t,"h",(function(){return u})),r.d(t,"e",(function(){return n})),r.d(t,"d",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"f",(function(){return o})),r.d(t,"g",(function(){return d}));var a=r("b775");function i(e){return Object(a["a"])({url:"/carsRepair/addCarsRepair",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/carsRepair/deleteCarsRepair/"+e,method:"get",params:e})}function u(e){return Object(a["a"])({url:"carsRepair/updateCarsRepair",method:"post",data:e})}function n(e){return Object(a["a"])({url:"carsRepair/select/"+e,method:"get",params:e})}function c(e){return Object(a["a"])({url:"carsRepair/allCarsRepairs",method:"get",params:e})}function l(e){return Object(a["a"])({url:"carsRepair/detailsByCarsRepairNumber/"+e,method:"get",params:e})}function o(){return Object(a["a"])({url:"carsRepair/selectCarNumbers",method:"get"})}function d(e,t){return Object(a["a"])({url:"carsRepair/statusOperate",method:"get",params:{carsRepairNumber:e,status:t}})}},4962:function(e,t,r){},9210:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"create"},[r("div",{staticClass:"create-body"},[r("el-form",{ref:"advices_form",staticClass:"demo-ruleForm",attrs:{"label-width":"200px",rules:e.form_rules,model:e.request_body}},[r("el-form-item",{attrs:{label:"车牌号",prop:"carNumber"}},[r("el-select",{staticStyle:{width:"240px"},attrs:{filterable:"","allow-create":"",clearable:""},model:{value:e.request_body.carNumber,callback:function(t){e.$set(e.request_body,"carNumber",t)},expression:"request_body.carNumber"}},e._l(e.carNumberList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",[r("el-button",{staticClass:"check_filter",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.add_item()}}},[e._v("添加设备信息")])],1),e._l(e.request_body.items,(function(t,a){return r("el-form",{key:t.id,attrs:{"label-width":"200px",model:t,inline:""}},[r("el-form-item",{attrs:{label:"设备类型",prop:"advicesType",rules:e.form_rules.advicesType}},[r("el-select",{staticStyle:{width:"300px"},attrs:{filterable:"","allow-create":"",clearable:""},model:{value:t.advicesType,callback:function(r){e.$set(t,"advicesType",r)},expression:"filter.advicesType"}},e._l(e.metaDataList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"设备名称",prop:"advicesName",rules:e.form_rules.advicesName}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入设备名称"},model:{value:t.advicesName,callback:function(r){e.$set(t,"advicesName",r)},expression:"filter.advicesName"}})],1),r("el-form-item",{attrs:{label:"设备编号",prop:"advicesNumber",rules:e.form_rules.advicesNumber}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入设备编号"},model:{value:t.advicesNumber,callback:function(r){e.$set(t,"advicesNumber",r)},expression:"filter.advicesNumber"}})],1),r("el-form-item",{attrs:{label:"设备数量",prop:"advicesQuantity",rules:e.form_rules.advicesQuantity}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入设备数量"},on:{input:function(t){return e.advicesItemsFullAmount(a)}},model:{value:t.advicesQuantity,callback:function(r){e.$set(t,"advicesQuantity",e._n(r))},expression:"filter.advicesQuantity"}})],1),r("el-form-item",{attrs:{label:"设备单价金额",prop:"advicesPriceAmount",rules:e.form_rules.advicesPriceAmount}},[r("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入设备单价金额"},on:{input:function(t){return e.advicesItemsFullAmount(a)}},model:{value:t.advicesPriceAmount,callback:function(r){e.$set(t,"advicesPriceAmount",r)},expression:"filter.advicesPriceAmount"}})],1),r("el-form-item",{attrs:{label:"设备总金额"}},[r("el-input",{staticStyle:{width:"300px","margin-right":"30px"},attrs:{placeholder:"请输入设备总金额"},model:{value:t.advicesFullAmount,callback:function(r){e.$set(t,"advicesFullAmount",r)},expression:"filter.advicesFullAmount"}}),r("el-button",{staticClass:"delete_icon",attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return e.delete_item(t)}}}),r("br"),r("br")],1)],1)})),r("el-form-item",[e.createStatus?r("el-button",{attrs:{type:"primary"},on:{click:e.addAdvice}},[e._v("立即添加")]):e._e(),e.createStatus?e._e():r("el-button",{attrs:{type:"primary"},on:{click:e.updateAdvice}},[e._v("立即保存")]),r("el-button",{on:{click:e.backHistory}},[e._v("返回")])],1)],2)],1)])},i=[],s=(r("ac1f"),r("00b4"),r("4de4"),r("d3b7"),r("a2b9")),u=r("f598"),n=r("365f"),c=r("ed08"),l={name:"AddAdvices",data:function(){var e=function(e,t,r){t.length>10?r(new Error("长度在 0 到 10 个字符")):setTimeout((function(){!/^\d+[.]?\d{0,2}$/.test(t)&&t?r(new Error("请输入正整数或小数保留两位小数")):r()}),500)};return{dialogVisible:!1,metaDataType:"ADVICE_TYPE",metaDataList:[],carNumberList:[],createStatus:!0,form_rules:{carNumber:[{required:!0,message:"车牌号不能为空",trigger:"blur"}],advicesType:[{required:!0,message:"设备类型不能为空",trigger:"blur"}],advicesName:[{required:!0,message:"设备名称不能为空",trigger:"change"}],advicesQuantity:[{type:"number",required:!0,message:"设备数量不能为空且为整数",trigger:"change"}],advicesPriceAmount:[{validator:e,trigger:"blur"},{required:!0,message:"设备单价金额不能为空"}]},request_body:{carNumber:null,items:[]}}},mounted:function(){var e=this,t=this.$route.query;t.carsRepairNumber&&(this.createStatus=!1,Object(u["d"])(t.carsRepairNumber).then((function(t){e.request_body=t.data}))),Object(s["a"])(this.metaDataType).then((function(t){e.metaDataList=t.data})),Object(n["f"])().then((function(t){e.carNumberList=t.data}))},methods:{add_item:function(){var e={id:Object(c["a"])(),advicesType:null,advicesName:null,advicesNumber:null,advicesQuantity:null,advicesPriceAmount:null,advicesFullAmount:null};this.request_body.items.push(e)},delete_item:function(e){console.log(e.id),this.request_body.items=this.request_body.items.filter((function(t){return t.id!==e.id}))},advicesFullAmount:function(){this.request_body.advicesFullAmount=this.request_body.advicesQuantity*this.request_body.advicesPriceAmount},advicesItemsFullAmount:function(e){this.request_body.items[e].advicesFullAmount=this.request_body.items[e].advicesQuantity*this.request_body.items[e].advicesPriceAmount},updateAdvice:function(){var e=this;this.$refs["advices_form"].validate((function(t){t&&Object(u["e"])(e.request_body).then((function(t){e.$router.push("/test/test"),e.$notify({title:"成功",message:"更新成功",type:"success"})}))}))},addAdvice:function(){var e=this;Object(u["a"])(this.request_body).then((function(t){var r=t.success;!0===r?(e.$router.push("/test/test"),e.$notify({title:"成功",message:"创建成功",type:"success"})):e.$alert(e.message["data"],"创建失败",{confirmButtonText:"确定"})}))},backHistory:function(){this.$router.go(-1)}}},o=l,d=(r("99f8"),r("2877")),m=Object(d["a"])(o,a,i,!1,null,"bb347680",null);t["default"]=m.exports},"99f8":function(e,t,r){"use strict";r("4962")},a2b9:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var a=r("b775");function i(e){return Object(a["a"])({url:"/metadata/select/"+e,method:"get",params:e})}},ed08:function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));r("53ca"),r("ac1f"),r("00b4"),r("5319"),r("4d63"),r("2c3e"),r("25f0"),r("d3b7"),r("4d90"),r("a15b"),r("d81d"),r("b64b"),r("1276"),r("159b"),r("fb6a"),r("a630"),r("3ca3"),r("6062"),r("ddb0"),r("466d");function a(){var e=+new Date+"",t=parseInt(65536*(1+Math.random()))+"";return(+(t+e)).toString(32)}},f598:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"e",(function(){return u})),r.d(t,"d",(function(){return n})),r.d(t,"b",(function(){return c}));var a=r("b775");function i(e){return Object(a["a"])({url:"/advice/addAdvices",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/advice/deleteAdvice/"+e,method:"get",params:e})}function u(e){return Object(a["a"])({url:"advice/updateAdvice",method:"post",data:e})}function n(e){return Object(a["a"])({url:"advice/selectByCarsRepairNumber/"+e,method:"get",params:e})}function c(e){return Object(a["a"])({url:"advice/allAdvices",method:"get",params:e})}}}]);