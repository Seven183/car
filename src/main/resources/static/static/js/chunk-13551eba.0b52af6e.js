(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13551eba"],{"365f":function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"h",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"f",(function(){return o})),a.d(t,"g",(function(){return d}));var r=a("b775");function s(e){return Object(r["a"])({url:"/carsRepair/addCarsRepair",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/carsRepair/deleteCarsRepair/"+e,method:"get",params:e})}function l(e){return Object(r["a"])({url:"carsRepair/updateCarsRepair",method:"post",data:e})}function u(e){return Object(r["a"])({url:"carsRepair/select/"+e,method:"get",params:e})}function n(e){return Object(r["a"])({url:"carsRepair/allCarsRepairs",method:"get",params:e})}function c(e){return Object(r["a"])({url:"carsRepair/detailsByCarsRepairNumber/"+e,method:"get",params:e})}function o(){return Object(r["a"])({url:"carsRepair/selectCarNumbers",method:"get"})}function d(e,t){return Object(r["a"])({url:"carsRepair/statusOperate",method:"get",params:{carsRepairNumber:e,status:t}})}},6468:function(e,t,a){},"64d9":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"create"},[a("div",{staticClass:"create-body"},[a("el-form",{ref:"carsRepair_form",attrs:{"label-width":"auto",rules:e.form_rules,model:e.request_body,inline:""}},[a("el-form-item",{attrs:{label:"姓名",prop:"userName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入姓名"},model:{value:e.request_body.userName,callback:function(t){e.$set(e.request_body,"userName",t)},expression:"request_body.userName"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"phone"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入电话或者手机号"},model:{value:e.request_body.phone,callback:function(t){e.$set(e.request_body,"phone",t)},expression:"request_body.phone"}})],1),a("el-form-item",{attrs:{label:"车牌号",prop:"carNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入车牌号"},model:{value:e.request_body.carNumber,callback:function(t){e.$set(e.request_body,"carNumber",t)},expression:"request_body.carNumber"}})],1),a("el-form-item",{attrs:{label:"车品牌",prop:"carBrand"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",clearable:""},model:{value:e.request_body.carBrand,callback:function(t){e.$set(e.request_body,"carBrand",t)},expression:"request_body.carBrand"}},e._l(e.carBrandMetaDataList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"车名称",prop:"carName"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入车名称"},model:{value:e.request_body.carName,callback:function(t){e.$set(e.request_body,"carName",t)},expression:"request_body.carName"}})],1),a("el-form-item",{attrs:{label:"维修类型",prop:"carsRepairType"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",clearable:""},model:{value:e.request_body.carsRepairType,callback:function(t){e.$set(e.request_body,"carsRepairType",t)},expression:"request_body.carsRepairType"}},e._l(e.faultMetaDataList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"维修内容",prop:"carsRepairText"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入维修内容",type:"textarea"},model:{value:e.request_body.carsRepairText,callback:function(t){e.$set(e.request_body,"carsRepairText",t)},expression:"request_body.carsRepairText"}})],1),a("el-form-item",{attrs:{label:"性别",prop:"sex"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",clearable:"",placeholder:"请输入性别"},model:{value:e.request_body.sex,callback:function(t){e.$set(e.request_body,"sex",t)},expression:"request_body.sex"}},e._l(e.sexMetaDataList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"年龄",prop:"age"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入年龄"},model:{value:e.request_body.age,callback:function(t){e.$set(e.request_body,"age",e._n(t))},expression:"request_body.age"}})],1),a("el-form-item",{attrs:{label:"联系地址",prop:"address"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入联系地址",type:"textarea"},model:{value:e.request_body.address,callback:function(t){e.$set(e.request_body,"address",t)},expression:"request_body.address"}})],1),a("el-form-item",{attrs:{label:"车架号",prop:"engineNumber"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入车架号"},model:{value:e.request_body.engineNumber,callback:function(t){e.$set(e.request_body,"engineNumber",t)},expression:"request_body.engineNumber"}})],1),e._l(e.request_body.advicesItems,(function(t,r){return a("el-form",{key:t.id,attrs:{"label-width":"auto",model:t,inline:""}},[a("el-divider"),a("el-form-item",{attrs:{label:"设备类型",prop:"advicesType",rules:e.form_rules.advicesType}},[a("el-select",{staticStyle:{width:"200px"},attrs:{filterable:"","allow-create":"",clearable:""},model:{value:t.advicesType,callback:function(a){e.$set(t,"advicesType",a)},expression:"filter.advicesType"}},e._l(e.adviceMetaDataList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.value,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"设备名称",prop:"advicesName",rules:e.form_rules.advicesName}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入设备名称"},model:{value:t.advicesName,callback:function(a){e.$set(t,"advicesName",a)},expression:"filter.advicesName"}})],1),a("el-form-item",{attrs:{label:"设备编号",prop:"advicesNumber",rules:e.form_rules.advicesNumber}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入设备编号"},model:{value:t.advicesNumber,callback:function(a){e.$set(t,"advicesNumber",a)},expression:"filter.advicesNumber"}})],1),a("el-form-item",{attrs:{label:"设备数量",prop:"advicesQuantity",rules:e.form_rules.advicesQuantity}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入设备数量"},on:{input:function(t){return e.advicesItemsFullAmount(r)}},model:{value:t.advicesQuantity,callback:function(a){e.$set(t,"advicesQuantity",e._n(a))},expression:"filter.advicesQuantity"}})],1),a("el-form-item",{attrs:{label:"设备单价金额",prop:"advicesPriceAmount",rules:e.form_rules.advicesPriceAmount}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入设备单价金额"},on:{input:function(t){return e.advicesItemsFullAmount(r)}},model:{value:t.advicesPriceAmount,callback:function(a){e.$set(t,"advicesPriceAmount",a)},expression:"filter.advicesPriceAmount"}})],1),a("el-form-item",{attrs:{label:"设备总金额"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"30px"},attrs:{placeholder:"请输入设备总金额"},model:{value:t.advicesFullAmount,callback:function(a){e.$set(t,"advicesFullAmount",a)},expression:"filter.advicesFullAmount"}}),a("el-button",{staticClass:"delete_icon",attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.delete_item(t)}}}),a("br"),a("br")],1)],1)})),a("div",{staticStyle:{margin:"50px"}},[a("el-form-item",[a("el-button",{staticClass:"check_filter",attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){return e.add_item()}}},[e._v("添加使用的工具")]),e.createStatus?a("el-button",{attrs:{type:"primary"},on:{click:e.addCarsRepair}},[e._v("新增本次维修记录")]):e._e(),e.createStatus?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.updateCarsRepair}},[e._v("更新本次维修记录")]),a("el-button",{on:{click:e.backHistory}},[e._v("返回")])],1)],1)],2)],1)])},s=[],i=(a("ac1f"),a("00b4"),a("d81d"),a("99af"),a("b0c0"),a("4de4"),a("d3b7"),a("365f")),l=a("a2b9"),u=a("ed08"),n=a("b775");function c(e){return Object(n["a"])({url:"/fileUpload",method:"post",headers:{"Content-Type":"multipart/form-data"},data:e})}var o={name:"AddCarsRepair",data:function(){var e=function(e,t,a){t.length>10?a(new Error("长度在 0 到 10 个字符")):setTimeout((function(){!/^\d+[.]?\d{0,2}$/.test(t)&&t?a(new Error("请输入正整数或小数保留两位小数")):a()}),500)};return{fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],sexMetaDataType:"SEX_TYPE",sexMetaDataList:[],carBrandMetaDataType:"CAR_BRAND_TYPE",carBrandMetaDataList:[],faultMetaDataType:"FAULT_TYPE",faultMetaDataList:[],adviceMetaDataType:"ADVICE_TYPE",adviceMetaDataList:[],createStatus:!0,form_rules:{userName:[{required:!0,message:"姓名不能为空",trigger:"blur"}],phone:[{required:!0,message:"联系方式不能为空",trigger:"blur"}],carNumber:[{required:!0,message:"车牌号不能为空",trigger:"blur"}],carsRepairType:[{required:!0,message:"维修类型不能为空",trigger:"blur"}],driverName:[{required:!0,message:"驾驶人姓名不能为空",trigger:"blur"}],age:[{type:"number",message:"年龄必须为数字",trigger:"blur"}],carBrand:[{required:!0,message:"车品牌不能为空",trigger:"blur"}],carName:[{required:!0,message:"车名称不能为空",trigger:"blur"}],advicesQuantity:[{type:"number",message:"设备数量为整数",trigger:"blur"}],advicesPriceAmount:[{validator:e,trigger:"blur"}]},request_body:{carNumber:null,carsRepairType:null,carsRepairText:null,username:null,phone:null,sex:null,age:null,address:null,photo:null,carBrand:null,carName:null,engineNumber:null,carPhoto:null,advicesItems:[],photoList:[]}}},mounted:function(){var e=this,t=this.$route.query;t.carsRepairNumber&&(this.createStatus=!1,Object(i["e"])(t.carsRepairNumber).then((function(t){e.request_body=t.data}))),Object(l["a"])(this.faultMetaDataType).then((function(t){e.faultMetaDataList=t.data})),Object(l["a"])(this.carBrandMetaDataType).then((function(t){e.carBrandMetaDataList=t.data})),Object(l["a"])(this.sexMetaDataType).then((function(t){e.sexMetaDataList=t.data})),Object(l["a"])(this.adviceMetaDataType).then((function(t){e.adviceMetaDataList=t.data}))},methods:{uploadPhoto:function(e,t,a){var r=this,s=new FormData;this.fileList.map((function(e){s.append("files",e.raw)})),c(t).then((function(e){r.photoList.add(e.data)}))},handleExceed:function(e,t){this.$message.warning("当前限制选择 10 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},beforeRemove:function(e,t){return this.$confirm("确定移除 ".concat(e.name,"？"))},add_item:function(){var e={id:Object(u["a"])(),advicesType:null,advicesName:null,advicesNumber:null,advicesQuantity:null,advicesPriceAmount:null,advicesFullAmount:null};this.request_body.advicesItems.push(e)},delete_item:function(e){this.request_body.advicesItems=this.request_body.advicesItems.filter((function(t){return t.id!==e.id}))},advicesItemsFullAmount:function(e){this.request_body.advicesItems[e].advicesFullAmount=this.request_body.advicesItems[e].advicesQuantity*this.request_body.advicesItems[e].advicesPriceAmount},updateCarsRepair:function(){var e=this;this.$refs["carsRepair_form"].validate((function(t){t&&Object(i["h"])(e.request_body).then((function(t){e.$router.push("/carsRepair/allCarsRepairs"),e.$notify({title:"成功",message:"更新成功",type:"success"})}))}))},addCarsRepair:function(){var e=this;this.$refs["carsRepair_form"].validate((function(t){t&&Object(i["a"])(e.request_body).then((function(t){var a=t.success;!0===a?(e.$router.push("/carsRepair/allCarsRepairs"),e.$notify({title:"成功",message:"创建成功",type:"success"})):e.$alert(e.message["data"],"创建失败",{confirmButtonText:"确定"})}))}))},backHistory:function(){this.$router.go(-1)}}},d=o,p=(a("97b7"),a("2877")),m=Object(p["a"])(d,r,s,!1,null,"6a4731b0",null);t["default"]=m.exports},"97b7":function(e,t,a){"use strict";a("6468")},a2b9:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("b775");function s(e){return Object(r["a"])({url:"/metadata/select/"+e,method:"get",params:e})}},ed08:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("53ca"),a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("2c3e"),a("25f0"),a("d3b7"),a("4d90"),a("a15b"),a("d81d"),a("b64b"),a("1276"),a("159b"),a("fb6a"),a("a630"),a("3ca3"),a("6062"),a("ddb0"),a("466d");function r(){var e=+new Date+"",t=parseInt(65536*(1+Math.random()))+"";return(+(t+e)).toString(32)}}}]);